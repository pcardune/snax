extern wasi_unstable {
  func fd_write(fileDescriptor:i32, iovPointer:i32, iovLength: i32, numWrittenPointer: i32):i32;
}

func run() {
  print("hello world\n");
  let meow = "meowwww\n";
  meow.buffer[1] = 'i';
  print(meow);
  print("more snax please!\n");
}

func print(s:&String) {
  let iovec = [s.buffer as usize, s.length];
  let bytesWritten = [0];
  fd_write(
    1, // stdout
    s, // pointer to io vector
    1, // length of io vector
    bytesWritten // where to store number of bytes written
  );
}

run();